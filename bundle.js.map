{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 2d70ea61d957c8f37106","webpack:///./main.js","webpack:///./lib/vector.js","webpack:///./lib/boid.js","webpack:///./lib/gfx.js","webpack:///./lib/simulator.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","loop","setTimeout","window","requestAnimationFrame","Gfx","drawBoids","boids","Simulator","moveBoids","initBoids","operator","op","_len","arguments","length","args","Array","_key","x","this","y","isArray","reduce","total","vector","Vector","scalar","val","prototype","add","sub","mul","div","mag","Math","sqrt","unit","scale","Boid","pos","vel","canvas","document","getElementById","ctx","getContext","width","innerWidth","height","innerHeight","clearRect","forEach","boid","idx","_boid$pos","fillStyle","fillRect","boidCenter","heading","beginPath","moveTo","lineTo","closePath","stroke","randPos","undefined","random","rule1","center","b","i","n","rule2","diff","rule3","limitVel","limit","boundPos","MAX_BOIDS","push","neighbors","filter","v1","v2","v3"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Simulator = __webpack_require__(4);\n\tvar Gfx = __webpack_require__(3);\n\t\n\tvar boids = Simulator.initBoids();\n\t\n\tfunction loop() {\n\t  setTimeout(function () {\n\t    window.requestAnimationFrame(loop);\n\t  }, 10);\n\t  Gfx.drawBoids(boids);\n\t  Simulator.moveBoids(boids);\n\t}\n\t\n\tloop();\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar Vector = function Vector(x, y) {\n\t  this.x = x;\n\t  this.y = y;\n\t};\n\t\n\tfunction operator(op) {\n\t  return function () {\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var x = this.x;\n\t    var y = this.y;\n\t\n\t\n\t    if (Array.isArray(args[0])) args = args[0];\n\t\n\t    return args.reduce(function (total, vector) {\n\t      if (op === '+') {\n\t        total.x += vector.x;\n\t        total.y += vector.y;\n\t      } else if (op === '-') {\n\t        total.x -= vector.x;\n\t        total.y -= vector.y;\n\t      }\n\t      return total;\n\t    }, new Vector(x, y));\n\t  };\n\t}\n\t\n\tfunction scalar(op) {\n\t  return function (val) {\n\t    if (op === '*') {\n\t      return new Vector(this.x * val, this.y * val);\n\t    } else if (op === '/') {\n\t      if (val === 0) val = 1;\n\t      return new Vector(this.x / val, this.y / val);\n\t    }\n\t  };\n\t}\n\t\n\tVector.prototype.add = operator('+');\n\tVector.prototype.sub = operator('-');\n\tVector.prototype.mul = scalar('*');\n\tVector.prototype.div = scalar('/');\n\t\n\tVector.prototype.mag = function () {\n\t  return Math.sqrt(this.x * this.x + this.y * this.y);\n\t};\n\t\n\tVector.prototype.unit = function (scale) {\n\t  if (scale) return this.div(this.mag()).mul(scale);\n\t  return this.div(this.mag());\n\t};\n\t\n\tmodule.exports = Vector;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Boid = function Boid(pos, vel) {\n\t  this.pos = pos;\n\t  this.vel = vel;\n\t};\n\t\n\tmodule.exports = Boid;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar canvas = document.getElementById('boids');\n\tvar ctx = canvas.getContext('2d');\n\tvar Vector = __webpack_require__(1);\n\t\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n\t\n\tvar width = 5;\n\tvar height = 5;\n\t\n\tvar Gfx = {\n\t  drawBoids: function drawBoids(boids) {\n\t    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\t    boids.forEach(function (boid, idx) {\n\t      var _boid$pos = boid.pos;\n\t      var x = _boid$pos.x;\n\t      var y = _boid$pos.y;\n\t\n\t      ctx.fillStyle = \"rgb(200,0,0)\";\n\t      ctx.fillRect(x, y, width, height);\n\t      var boidCenter = boid.pos.add(new Vector(width / 2, height / 2));\n\t      var heading = boidCenter.add(boid.vel.unit(10));\n\t      ctx.beginPath();\n\t      ctx.moveTo(boidCenter.x, boidCenter.y);\n\t      ctx.lineTo(heading.x, heading.y);\n\t      ctx.closePath();\n\t      ctx.stroke();\n\t    });\n\t    return boids;\n\t  }\n\t};\n\t\n\tmodule.exports = Gfx;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Boid = __webpack_require__(2);\n\tvar Vector = __webpack_require__(1);\n\tvar MAX_BOIDS = 100;\n\t\n\tfunction randPos() {\n\t  var width = arguments.length <= 0 || arguments[0] === undefined ? window.innerWidth : arguments[0];\n\t  var height = arguments.length <= 1 || arguments[1] === undefined ? window.innerHeight : arguments[1];\n\t\n\t  var x = Math.random() * width;\n\t  var y = Math.random() * height;\n\t  return new Vector(x, y);\n\t}\n\t\n\tfunction rule1(boid, idx, boids) {\n\t  // Calculate perceived center of swarm (excluding current boid)\n\t  var center = boids.reduce(function (total, b, i) {\n\t    if (b !== boid) {\n\t      total = total.add(b.pos);\n\t    }\n\t    return total;\n\t  }, new Vector(0, 0));\n\t\n\t  var n = boids.length - 1;\n\t  return center.div(n).sub(boid.pos).div(100);\n\t}\n\t\n\tfunction rule2(boid, idx, boids) {\n\t  var c = new Vector(0, 0);\n\t\n\t  boids.forEach(function (b, i) {\n\t    if (b !== boid) {\n\t      var diff = b.pos.sub(boid.pos);\n\t      if (diff.mag() < 10) c = c.sub(b.pos.sub(boid.pos));\n\t    }\n\t  });\n\t\n\t  return c;\n\t}\n\t\n\tfunction rule3(boid, idx, boids) {\n\t  var vel = new Vector(0, 0);\n\t\n\t  boids.forEach(function (b, i) {\n\t    if (b !== boid) {\n\t      vel = vel.add(b.vel);\n\t    }\n\t  });\n\t\n\t  vel = vel.div(boids.length - 1);\n\t  return vel.sub(boid.vel).div(8);\n\t}\n\t\n\tfunction limitVel(vel, limit) {\n\t  var mag = vel.mag();\n\t\n\t  if (mag > limit) return vel.div(mag).mul(limit);\n\t  return vel;\n\t}\n\t\n\tfunction boundPos(boid) {\n\t  var vel = new Vector(boid.vel.x, boid.vel.y);\n\t\n\t  if (boid.pos.x < 0) {\n\t    vel.x = 10;\n\t  } else if (boid.pos.x > window.innerWidth) {\n\t    vel.x = -10;\n\t  }\n\t\n\t  if (boid.pos.y < 0) {\n\t    vel.y = 10;\n\t  } else if (boid.pos.y > window.innerHeight) {\n\t    vel.y = -10;\n\t  }\n\t\n\t  return vel;\n\t}\n\t\n\tvar Simulator = {\n\t  initBoids: function initBoids() {\n\t    var boids = [];\n\t    var center = new Vector(window.innerWidth / 2, window.innerHeight / 2);\n\t    for (var i = 0; i < MAX_BOIDS; i++) {\n\t      var pos = randPos();\n\t      var vel = center.sub(pos);\n\t      boids.push(new Boid(pos, vel));\n\t    }\n\t    return boids;\n\t  },\n\t\n\t  moveBoids: function moveBoids(boids) {\n\t    boids = boids.forEach(function (boid, idx) {\n\t      var neighbors = boids.filter(function (b) {\n\t        return b.pos.sub(boid.pos).mag() < 50;\n\t      });\n\t\n\t      var v1 = rule1(boid, idx, neighbors);\n\t      var v2 = rule2(boid, idx, neighbors);\n\t      var v3 = rule3(boid, idx, neighbors);\n\t      boid.vel = boid.vel.add(v1, v2, v3);\n\t      boid.vel = limitVel(boid.vel, 10);\n\t      boid.vel = boundPos(boid);\n\t      boid.pos = boid.pos.add(boid.vel);\n\t    });\n\t    return boids;\n\t  }\n\t};\n\t\n\tmodule.exports = Simulator;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2d70ea61d957c8f37106\n **/","const Simulator = require('./lib/simulator');\nconst Gfx = require('./lib/gfx');\n\nlet boids = Simulator.initBoids();\n\nfunction loop() {\n  setTimeout(() => {\n    window.requestAnimationFrame(loop);\n  }, 10);\n  Gfx.drawBoids(boids);\n  Simulator.moveBoids(boids);\n}\n\nloop();\n\n\n\n/** WEBPACK FOOTER **\n ** ./main.js\n **/","const Vector = function(x, y) {\n  this.x = x;\n  this.y = y;\n};\n\nfunction operator(op) {\n  return function(...args) {\n    const { x, y } = this;\n\n    if (Array.isArray(args[0]))\n      args = args[0];\n\n    return args.reduce((total, vector) => {\n      if (op === '+') {\n        total.x += vector.x;\n        total.y += vector.y;\n      } else if (op === '-') {\n        total.x -= vector.x;\n        total.y -= vector.y;\n      }\n      return total;\n    }, new Vector(x, y));\n  };\n}\n\nfunction scalar(op) {\n  return function(val) {\n    if (op === '*') {\n      return new Vector(this.x * val, this.y * val);\n    } else if (op === '/') {\n      if (val === 0) val = 1;\n      return new Vector(this.x / val, this.y / val);\n    }\n  };\n}\n\nVector.prototype.add = operator('+');\nVector.prototype.sub = operator('-');\nVector.prototype.mul = scalar('*');\nVector.prototype.div = scalar('/');\n\nVector.prototype.mag = function() {\n  return Math.sqrt(this.x * this.x + this.y * this.y);\n};\n\nVector.prototype.unit = function(scale) {\n  if (scale) return this.div(this.mag()).mul(scale);\n  return this.div(this.mag());\n};\n\nmodule.exports = Vector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/vector.js\n **/","var Boid = function(pos, vel) {\n  this.pos = pos;\n  this.vel = vel;\n};\n\nmodule.exports = Boid;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/boid.js\n **/","let canvas = document.getElementById('boids');\nlet ctx = canvas.getContext('2d');\nconst Vector = require('./vector');\n\ncanvas.width  = window.innerWidth;\ncanvas.height = window.innerHeight;\n\nconst width = 5;\nconst height = 5;\n\nconst Gfx = {\n  drawBoids: function(boids) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    boids.forEach((boid, idx) => {\n      const { x, y } = boid.pos;\n      ctx.fillStyle = \"rgb(200,0,0)\";\n      ctx.fillRect(x, y, width, height);\n      const boidCenter = boid.pos.add(new Vector(width/2, height/2));\n      const heading = boidCenter.add(boid.vel.unit(10));\n      ctx.beginPath();\n      ctx.moveTo(boidCenter.x, boidCenter.y);\n      ctx.lineTo(heading.x, heading.y);\n      ctx.closePath();\n      ctx.stroke();\n    });\n    return boids;\n  }\n};\n\nmodule.exports = Gfx;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/gfx.js\n **/","const Boid = require('./boid');\nconst Vector = require('./vector');\nconst MAX_BOIDS = 100;\n\nfunction randPos(width=window.innerWidth, height=window.innerHeight) {\n  const x = Math.random() * width;\n  const y = Math.random() * height;\n  return new Vector(x,y);\n}\n\nfunction rule1(boid, idx, boids) {\n  // Calculate perceived center of swarm (excluding current boid)\n  const center = boids.reduce((total, b, i) => {\n    if (b !== boid) {\n      total = total.add(b.pos);\n    }\n    return total;\n  }, new Vector(0, 0));\n\n  const n = boids.length - 1;\n  return center.div(n).sub(boid.pos).div(100);\n}\n\nfunction rule2(boid, idx, boids) {\n  let c = new Vector(0, 0);\n\n  boids.forEach((b, i) => {\n    if (b !== boid) {\n      let diff = b.pos.sub(boid.pos);\n      if (diff.mag() < 10)\n        c = c.sub(b.pos.sub(boid.pos));\n    }\n  });\n\n  return c;\n}\n\nfunction rule3(boid, idx, boids) {\n  let vel = new Vector(0, 0);\n\n  boids.forEach((b, i) => {\n    if (b !== boid) {\n      vel = vel.add(b.vel);\n    }\n  });\n\n  vel = vel.div(boids.length-1);\n  return vel.sub(boid.vel).div(8);\n}\n\nfunction limitVel(vel, limit) {\n  const mag = vel.mag();\n\n  if (mag > limit)\n    return vel.div(mag).mul(limit);\n  return vel;\n}\n\nfunction boundPos(boid) {\n  let vel = new Vector(boid.vel.x, boid.vel.y);\n\n  if (boid.pos.x < 0)  {\n    vel.x = 10;\n  } else if (boid.pos.x > window.innerWidth) {\n    vel.x = -10;\n  }\n\n  if (boid.pos.y < 0) {\n    vel.y = 10;\n  } else if (boid.pos.y > window.innerHeight) {\n    vel.y = -10;\n  }\n\n  return vel;\n}\n\nconst Simulator = {\n  initBoids: function() {\n    const boids = [];\n    const center = new Vector(window.innerWidth/2, window.innerHeight/2);\n    for(let i=0; i<MAX_BOIDS; i++) {\n      const pos = randPos();\n      const vel = center.sub(pos);\n      boids.push(new Boid(pos, vel));\n    }\n    return boids;\n  },\n\n  moveBoids: function(boids) {\n    boids = boids.forEach((boid, idx) => {\n      const neighbors = boids.filter((b) => {\n        return b.pos.sub(boid.pos).mag() < 50;\n      });\n\n      let v1 = rule1(boid, idx, neighbors);\n      let v2 = rule2(boid, idx, neighbors);\n      let v3 = rule3(boid, idx, neighbors);\n      boid.vel = boid.vel.add(v1, v2, v3);\n      boid.vel = limitVel(boid.vel, 10);\n      boid.vel = boundPos(boid);\n      boid.pos = boid.pos.add(boid.vel);\n    });\n    return boids;\n  }\n};\n\nmodule.exports = Simulator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/simulator.js\n **/"],"sourceRoot":""}