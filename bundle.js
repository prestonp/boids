!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(){var t=(Date.now()-a)/1e3;a=Date.now(),h=1/t,setTimeout(function(){window.requestAnimationFrame(i)},o.delay);var e=u.slice(0,o.numBoids);s.clear(),s.drawBoids(e),s.drawFps(h),d.moveBoids(e)}var o=n(1),r=n(6),s=n(4),d=new r(window.innerWidth,window.innerHeight);n(5);var u=d.initBoids(),a=Date.now(),h=0;s.onResize(function(t,e){d.width=t,d.height=e}),i()},function(t,e){"use strict";t.exports={maxBoids:200,numBoids:100,maxVel:10,neighborRadius:50,reboundVel:10,headingFactor:8,repelDistance:10,cohesion:1,delay:0}},function(t,e){"use strict";function n(t){return function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];var r=this.x,s=this.y;return Array.isArray(n[0])&&(n=n[0]),n.reduce(function(e,n){return"+"===t?(e.x+=n.x,e.y+=n.y):"-"===t&&(e.x-=n.x,e.y-=n.y),e},new o(r,s))}}function i(t){return function(e){return"*"===t?new o(this.x*e,this.y*e):"/"===t?(0===e&&(e=1),new o(this.x/e,this.y/e)):void 0}}var o=function(t,e){this.x=t,this.y=e};o.prototype.add=n("+"),o.prototype.sub=n("-"),o.prototype.mul=i("*"),o.prototype.div=i("/"),o.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.unit=function(t){return t?this.div(this.mag()).mul(t):this.div(this.mag())},t.exports=o},function(t,e){"use strict";var n=function(t,e){this.pos=t,this.vel=e};t.exports=n},function(t,e,n){"use strict";var i=document.getElementById("boids"),o=i.getContext("2d"),r=n(2);i.width=window.innerWidth,i.height=window.innerHeight;var s=5,d=5,u={clear:function(){o.clearRect(0,0,i.width,i.height)},drawBoids:function(t){return t.forEach(function(t,e){var n=t.pos,i=n.x,u=n.y;o.fillStyle="rgb(200,0,0)",o.fillRect(i,u,s,d);var a=t.pos.add(new r(s/2,d/2)),h=a.add(t.vel.unit(10));o.beginPath(),o.moveTo(a.x,a.y),o.lineTo(h.x,h.y),o.closePath(),o.stroke()}),t},drawFps:function(t){o.font="32px helvetica",o.fillText(Math.round(t)+" fps",10,30)},onResize:function(t){window.addEventListener("resize",function(e){i.width=window.innerWidth,i.height=window.innerHeight,t(window.innerWidth,window.innerHeight)})}};t.exports=u},function(t,e,n){"use strict";var i=n(1),o=new dat.GUI;o.add(i,"numBoids",1,200),o.add(i,"maxVel",1,100),o.add(i,"neighborRadius",5,100),o.add(i,"reboundVel"),o.add(i,"headingFactor",1,20),o.add(i,"repelDistance",5,20),o.add(i,"cohesion",1,20),o.add(i,"delay")},function(t,e,n){"use strict";var i=n(1),o=n(3),r=n(2),s=function(t,e){this.width=t,this.height=e};s.prototype.rule1=function(t,e,n){var o=n.reduce(function(e,n,i){return n!==t&&(e=e.add(n.pos)),e},new r(0,0)),s=n.length-1;return o.div(s).sub(t.pos).div(100).mul(i.cohesion)},s.prototype.rule2=function(t,e,n){var o=new r(0,0);return n.forEach(function(e,n){if(e!==t){var r=e.pos.sub(t.pos);r.mag()<i.repelDistance&&(o=o.sub(e.pos.sub(t.pos)))}}),o},s.prototype.rule3=function(t,e,n){var o=new r(0,0);return n.forEach(function(e,n){e!==t&&(o=o.add(e.vel))}),o=o.div(n.length-1),o.sub(t.vel).div(i.headingFactor)},s.prototype.randPos=function(){var t=Math.random()*this.width,e=Math.random()*this.height;return new r(t,e)},s.prototype.initBoids=function(){for(var t=[],e=new r(this.width/2,this.height/2),n=0;n<i.maxBoids;n++){var s=this.randPos(),d=e.sub(s);t.push(new o(s,d))}return t},s.prototype.limitVel=function(t,e){var n=t.mag();return n>e?t.div(n).mul(e):t},s.prototype.boundPos=function(t){var e=new r(t.vel.x,t.vel.y);return t.pos.x<0?e.x=i.reboundVel:t.pos.x>this.width&&(e.x=-i.reboundVel),t.pos.y<0?e.y=i.reboundVel:t.pos.y>this.height&&(e.y=-i.reboundVel),e},s.prototype.moveBoids=function(t){var e=this;return t=t.forEach(function(n,o){var r=t.filter(function(t){return t.pos.sub(n.pos).mag()<i.neighborRadius}),s=e.rule1(n,o,r),d=e.rule2(n,o,r),u=e.rule3(n,o,r);n.vel=n.vel.add(s,d,u),n.vel=e.limitVel(n.vel,i.maxVel),n.vel=e.boundPos(n),n.pos=n.pos.add(n.vel)})},t.exports=s}]);
//# sourceMappingURL=bundle.js.map